(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2108],{87210:function(t,e,i){"use strict";i.d(e,{S:function(){return r}});var n=i(74579);i(58954);var r=(0,n.dW)(t=>({instance:L.bingLayer(t.bingkey,t)}))},58954:function(){L.BingLayer=L.TileLayer.extend({options:{subdomains:[0,1,2,3],type:"Aerial",attribution:"Bing",culture:"",style:""},initialize:function(t,e){L.Util.setOptions(this,e),this._bing_key=t,this._url=null,this._providers=[],this.metaRequested=!1},tile2quad:function(t,e,i){for(var n="",r=i;r>0;r--){var o=0,a=1<<r-1;(t&a)!=0&&(o+=1),(e&a)!=0&&(o+=2),n+=o}return n},getTileUrl:function(t){var e=this._getZoomForUrl(),i=this.options.subdomains,n=this.options.subdomains[Math.abs((t.x+t.y)%i.length)];return this._url.replace("{subdomain}",n).replace("{quadkey}",this.tile2quad(t.x,t.y,e)).replace("{culture}",this.options.culture)},loadMetadata:function(){if(this.metaRequested)return;this.metaRequested=!0;let t=this;var e="_bing_metadata_"+L.Util.stamp(this);window[e]=function(i){window[e]=void 0;var n=document.getElementById(e);if(n.parentNode.removeChild(n),i.errorDetails){console.log(i.errorDetails);return}t.initMetadata(i)};var i="file:"===document.location.protocol?"http":document.location.protocol.slice(0,-1),n=i+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+e+"&key="+this._bing_key+"&UriScheme="+i+"&culture="+this.options.culture+"&style="+this.options.style,r=document.createElement("script");r.type="text/javascript",r.src=n,r.id=e,document.getElementsByTagName("head")[0].appendChild(r)},initMetadata:function(t){var e=t.resourceSets[0].resources[0];if(this.options.subdomains=e.imageUrlSubdomains,this._url=e.imageUrl,e.imageryProviders)for(var i=0;i<e.imageryProviders.length;i++)for(var n=e.imageryProviders[i],r=0;r<n.coverageAreas.length;r++){var o=n.coverageAreas[r],a={zoomMin:o.zoomMin,zoomMax:o.zoomMax,active:!1};if(void 0!=o.bbox)var s=new L.LatLngBounds(new L.LatLng(o.bbox[0]+.01,o.bbox[1]+.01),new L.LatLng(o.bbox[2]-.01,o.bbox[3]-.01));a.bounds=s,a.attrib=n.attribution,this._providers.push(a)}this._update()},_update:function(){null!==this._url&&this._map&&(this._update_attribution(),L.TileLayer.prototype._update.apply(this,[]))},_update_attribution:function(){for(var t=this._map.getZoom(),e=0;e<this._providers.length;e++){var i=this._providers[e];t<=i.zoomMax&&t>=i.zoomMin?(!i.active&&this._map.attributionControl&&this._map.attributionControl.addAttribution(i.attrib),i.active=!0):(i.active&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(i.attrib),i.active=!1)}},onAdd:function(t){this.loadMetadata(),L.TileLayer.prototype.onAdd.apply(this,[t])},onRemove:function(t){for(var e=0;e<this._providers.length;e++){var i=this._providers[e];i.active&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(i.attrib),i.active=!1)}L.TileLayer.prototype.onRemove.apply(this,[t])}}),L.bingLayer=function(t,e){return new L.BingLayer(t,e)}},22108:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return A}});var n=i(85893),r=i(67294),o=i(32342),a=i(39153),s=i(5715),l=i(26467),u=i(20577),c=i(64049),h=i(32604),d=i(87210),p=i(59152),m=i.n(p),g=i(60990),v=i(96788),y=i(13110),x=i(48445);i(53183),i(23008);let{BaseLayer:b}=o.LayersControl,f=t=>{let{coords:e,zoom:i}=t;return(0,a.Sx)().flyTo(e,i,{duration:1}),null},_=t=>new L.Icon({iconUrl:t,iconSize:[18,18],iconAnchor:[18,18],popupAnchor:[-9,-18]}),j=t=>1==t?_("/images/icon/rain-0.svg"):_("/images/icon/thuydien.png");function A(t){let{center:e,zoom:i,showLabel:a,mapData:p,loading:_,type:A=null}=t,[C,S]=(0,r.useState)("AuhiCJHlGzhg93IqUH_oCpl_-ZUrIE6SPftlyGYUvr9Amx5nzA-WqGcPquyFZl4L"),[z,k]=(0,r.useState)(null);return(0,r.useEffect)(()=>{S("AuhiCJHlGzhg93IqUH_oCpl_-ZUrIE6SPftlyGYUvr9Amx5nzA-WqGcPquyFZl4L"),fetch("/kml/tinh-quangngai.kml").then(t=>t.text()).then(t=>{k(new DOMParser().parseFromString(t,"text/xml"))})},[]),_?(0,n.jsx)(g.Z,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(x.Z,{})}):(0,n.jsx)(g.Z,{sx:{height:"100%"},children:(0,n.jsxs)(s.h,{attributionControl:!1,center:e,zoom:i,style:{height:"100%"},children:[(0,n.jsxs)(o.LayersControl,{position:"bottomright",children:[(0,n.jsx)(b,{checked:"hanh-chinh"==A,name:"Bản đồ h\xe0nh ch\xednh",children:(0,n.jsx)(l.I,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),(0,n.jsx)(b,{checked:"road"==A,name:"Bản đồ đường",children:(0,n.jsx)(d.S,{bingkey:C,type:"Road"})}),(0,n.jsx)(b,{name:"Bản đồ vệ tinh 1",children:(0,n.jsx)(l.I,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),(0,n.jsx)(b,{checked:!A,name:"Bản đồ vệ tinh 2",children:(0,n.jsx)(d.S,{bingkey:C,type:"AerialWithLabels"})})]}),p&&(null==p?void 0:p.map(t=>null!==t.x||null!==t.y?(0,n.jsxs)(u.J,{icon:j(t.idLoaiTram),position:[(0,y.D)(null==t?void 0:t.y,null==t?void 0:t.x)[0],(0,y.D)(t.y,t.x)[1]],children:[!0===a&&(0,n.jsx)(c.u,{direction:"top",offset:[-10,-18],opacity:1,permanent:!0,children:t.tenCT}),(0,n.jsxs)(h.G,{children:[(0,n.jsx)(v.Z,{sx:{color:"#035291",textAlign:"center",fontWeight:"bold",margin:"0 !important"},children:t.tenCT}),(0,n.jsx)(v.Z,{sx:{textAlign:"center",fontSize:12,margin:"0 !important",fontStyle:"italic"},children:t.viTriCT}),(0,n.jsxs)(v.Z,{sx:{textAlign:"center",fontSize:12,margin:"0 !important"},children:["Kinh độ (X):",t.x," \xa0 Vĩ độ (Y):",t.y]})]})]},t.id):null)),(0,n.jsx)(f,{coords:e,zoom:i}),z&&(0,n.jsx)(m(),{kml:z})]})})}},23008:function(){},39153:function(t,e,i){"use strict";i.d(e,{Sx:function(){return r}});var n=i(1410);function r(){return(0,n.mE)().map}i(67294)}}]);